(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ae8ede58"],{"0ff8":function(t,e,a){},"5ff5":function(t,e,a){"use strict";a("0ff8")},"99c1":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("SideBar"),a("SettingForm",{attrs:{"initial-user-data":t.userData,isUserSetting:t.setting},on:{"after-submit":t.handleAfterSubmit}})],1)},r=[],n=a("5530"),i=a("1da1"),o=(a("96cf"),a("b0c0"),a("7c08")),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting-wrapper"},[a("h6",{staticClass:"page-title"},[t._v("帳戶設定")]),a("form",{staticClass:"setting-form",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmit.apply(null,arguments)}}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-input",attrs:{for:"InputAccount"}},[t._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.account,expression:"userData.account"}],staticClass:"form-control",attrs:{id:"InputAccount",name:"account",type:"text"},domProps:{value:t.userData.account},on:{input:function(e){e.target.composing||t.$set(t.userData,"account",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-input",attrs:{for:"InputName"}},[t._v("名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.name,expression:"userData.name"}],staticClass:"form-control",attrs:{id:"InputName",name:"name",type:"text"},domProps:{value:t.userData.name},on:{input:function(e){e.target.composing||t.$set(t.userData,"name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-input",attrs:{for:"InputEmail"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.email,expression:"userData.email"}],staticClass:"form-control",attrs:{id:"InputEmail",name:"email",type:"email"},domProps:{value:t.userData.email},on:{input:function(e){e.target.composing||t.$set(t.userData,"email",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-input",attrs:{for:"InputPassword"}},[t._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.password,expression:"userData.password"}],staticClass:"form-control",attrs:{id:"InputPassword",name:"password",type:"password"},domProps:{value:t.userData.password},on:{input:function(e){e.target.composing||t.$set(t.userData,"password",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-input",attrs:{for:"InputPasswordConfirm"}},[t._v("密碼確認")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.checkPassword,expression:"userData.checkPassword"}],staticClass:"form-control",attrs:{id:"InputPasswordConfirm",name:"checkPassword",type:"password"},domProps:{value:t.userData.checkPassword},on:{input:function(e){e.target.composing||t.$set(t.userData,"checkPassword",e.target.value)}}})]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.setting,expression:"setting"}],staticClass:"setting-input",attrs:{type:"text",name:"setting"},domProps:{value:t.setting},on:{input:function(e){e.target.composing||(t.setting=e.target.value)}}}),t._m(0)])])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"save"},[a("button",{staticClass:"form-submit",attrs:{type:"submit"}},[t._v("儲存")])])}],l=a("1602"),m=a("2fa3"),p={name:"SettingForm",props:{initialUserData:{type:Object,default:function(){return{id:-1,account:"",name:"",email:"",password:""}}}},data:function(){return{setting:!0,userData:Object(n["a"])({},this.intialUserData)}},created:function(){var t=this.$route.params.id;this.fetchUser(t)},watch:{initialUserData:function(t){this.userData=Object(n["a"])(Object(n["a"])({},this.userData),t)}},methods:{fetchUser:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r,i,o,u,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l["a"].getUser({userId:t});case 3:s=a.sent,r=s.data,i=r.id,o=r.name,u=r.account,c=r.email,e.userData=Object(n["a"])(Object(n["a"])({},e.userData),{},{id:i,name:o,account:u,email:c}),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},handleSubmit:function(t){if(this.userData.account&&this.userData.name&&this.userData.email&&this.userData.password&&this.userData.checkPassword)if(this.userData.name.length>15)m["a"].fire({icon:"warning",title:"名字長度最多 15 個字"});else if(this.userData.account.length>10)m["a"].fire({icon:"warning",title:"帳號最多 10 個字"});else if(this.userData.password.length<5||this.userData.password.length>15)m["a"].fire({icon:"warning",title:"密碼長度需要在 5 至 15 之間"});else if(this.userData.checkPassword===this.userData.password){var e=t.target,a=new FormData(e);this.$emit("after-submit",a)}else m["a"].fire({icon:"warning",title:"密碼與密碼確認不同"});else m["a"].fire({icon:"warning",title:"請填寫所有欄位"})}}},d=p,f=(a("b9fb"),a("2877")),v=Object(f["a"])(d,u,c,!1,null,"a5cbefe0",null),g=v.exports,h={name:"AccountSetting",components:{SideBar:o["a"],SettingForm:g},data:function(){return{setting:!0,userData:{id:-1,account:"",name:"",email:""}}},created:function(){var t=this.$route.params.id;this.fetchUser(t)},methods:{fetchUser:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r,i,o,u,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l["a"].getUser({userId:t});case 3:s=a.sent,r=s.data,i=r.id,o=r.name,u=r.account,c=r.email,e.userData=Object(n["a"])(Object(n["a"])({},e.userData),{},{id:i,name:o,account:u,email:c}),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},handleAfterSubmit:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l["a"].editUser({userId:e.$route.params.id,formData:t});case 3:if(s=a.sent,r=s.data,"success"===r.status){a.next=7;break}throw new Error(r.message);case 7:m["a"].fire({icon:"success",title:"已完成帳戶資料更新"}),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0),m["a"].fire({icon:"error",title:"無法更新用戶資訊，請稍後再試"});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()}}},w=h,D=(a("5ff5"),Object(f["a"])(w,s,r,!1,null,"78c6e691",null));e["default"]=D.exports},b9fb:function(t,e,a){"use strict";a("e9c4")},e9c4:function(t,e,a){}}]);
//# sourceMappingURL=chunk-ae8ede58.2b72d5f9.js.map