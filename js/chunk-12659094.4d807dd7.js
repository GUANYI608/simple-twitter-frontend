(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12659094"],{"00c0":function(t,e,a){"use strict";a("cdcb")},"11aa":function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAAwADADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9U6KKjuLiK0t5Z55UhgiUvJLIwVUUDJJJ4AA70ASUV+Zfxa/4KH/En41/tF6H8Mv2YYoL21tbrF5rM9ok8OoBSBIxLgiK1QdZBhmONpGV3fppQAUUUUAFfjZ/wUP/AOCiD/GfV7n4U/DrVxpXgJZ/suseIDvA1I7sMo2KXFsvJO1S0mOAVwG/ZOvxr/4KHf8ABO5/grq1z8Vfhzo66p4BM4udX8PHeRph3ZYjYyv9lbodrBo88ELgqAe1/se/tC/scfsj+ABpel/EtNT8T3yq+s6/J4d1MSXUg/gT/RspEpJ2p+JySTXv/wDw9H/Zi/6Kb/5QNU/+Rq8B/Y9/Z6/Y4/a48ADVNL+GiaZ4nsVVNZ0CTxFqZktZD/Gn+k5eJiDtf8Dggivfv+HXH7MX/RMv/K/qn/yTQAf8PR/2Yv8Aopv/AJQNU/8Akavoj4e/ELw78VvBul+LPCeqw614e1OMyWl9AGVZAGKNwwDAhlZSCAQQQRxXzv8A8OuP2Yv+iZf+V/VP/kmvoj4e/D3w78KfBmleE/Celx6N4e0uMxWljEzMsalix+ZiWYlmYksSSSSTQB0VR3FvFeW8sE8STwSqUkikUMrqRggg8EEdqkooA/Mv4tf8E8PiT8FP2itE+Jv7MM0Fja3V1m80ae6SGLTwzDzVw7AS2rDOYxllx8oPy7f00oooAKKKKAP/2Q=="},"56c3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("SideBar"),a("div",{staticClass:"comments-wrapper"},[a("Posting",{attrs:{"initial-tweet":t.tweet},on:{"after-submit":t.afterSubmit}}),a("PostingComments",{attrs:{"initial-tweet":t.tweet,replies:t.replies}})],1),a("OtherUsers")],1)},i=[],r=a("1da1"),n=(a("96cf"),a("b0c0"),a("a4d3"),a("e01a"),a("d81d"),a("7c08")),c=a("b112"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"posting"},[s("div",{staticClass:"page-head",on:{click:function(e){return t.$router.back()}}},[s("img",{staticClass:"back-icon",attrs:{src:a("11aa"),alt:"back to homepage page"}}),s("h6",{staticClass:"page-name"},[t._v("推文")])]),s("div",{staticClass:"tweet"},[s("router-link",{attrs:{to:{name:"user",params:{id:t.tweet.userId}}}},[s("img",{staticClass:"user-avatar",attrs:{src:t.tweet.avatar,alt:"avatar"}})]),s("div",{staticClass:"user-info"},[s("router-link",{attrs:{to:{name:"user",params:{id:t.tweet.userId}}}},[s("h6",{staticClass:"user-name"},[t._v(t._s(t.tweet.name))])]),s("h6",{staticClass:"user-account"},[t._v("@"+t._s(t.tweet.account))])],1),s("p",{staticClass:"tweet-content"},[t._v(" "+t._s(t.tweet.description)+" ")]),s("p",{staticClass:"detail-info"},[t._v(t._s(t.tweet.createdAtInCN))]),s("div",{staticClass:"number-followers"},[s("span",{staticClass:"number"},[t._v(t._s(t.tweet.replyCount))]),s("span",{staticClass:"followers"},[t._v("回覆")]),s("span",{staticClass:"number"},[t._v(t._s(t.tweet.likeCount))]),s("span",{staticClass:"followers"},[t._v("喜歡次數")])]),s("div",{staticClass:"icons"},[s("img",{staticClass:"icon",attrs:{src:a("3489"),alt:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleReplyModal()}}}),t.tweet.isLiked?s("img",{staticClass:"icon",attrs:{src:a("1275"),alt:"",disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteLike(t.tweet.id)}}}):s("img",{staticClass:"icon",attrs:{src:a("2027"),alt:"",disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addLike(t.tweet.id)}}})])],1),s("RepliedModal",{attrs:{"initial-is-reply-modal-toggle":t.isReplyModalToggle,"modal-tweet":t.modalTweet},on:{"after-close-modal":t.closeReplyModal,"after-submit":t.afterSubmit}})],1)},l=[],u=a("5530"),d=a("0262"),A=a("6783"),p=a("2fa3"),w={components:{RepliedModal:d["a"]},props:{initialTweet:{type:Object,required:!0}},data:function(){return{isReplyModalToggle:!1,tweet:this.initialTweet,modalTweet:{},isProcessing:!1}},watch:{initialTweet:function(t){this.tweet=Object(u["a"])(Object(u["a"])({},this.tweet),t)}},methods:{toggleReplyModal:function(){this.isReplyModalToggle=!0,this.modalTweet=this.tweet},afterSubmit:function(){this.$emit("after-submit")},closeReplyModal:function(t){this.isReplyModalToggle=t},addLike:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isProcessing=!0,a.next=4,A["a"].addLike({tweetId:t});case 4:if(s=a.sent,i=s.data,"error"!==i.status){a.next=8;break}throw new Error(i.message);case 8:e.tweet.isLiked=!0,e.tweet.likeCount++,e.isProcessing=!1,a.next=18;break;case 13:a.prev=13,a.t0=a["catch"](0),console.log(a.t0),p["a"].fire({icon:"error",title:"無法按讚，請稍後再試"}),e.isProcessing=!1;case 18:case"end":return a.stop()}}),a,null,[[0,13]])})))()},deleteLike:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isProcessing=!0,a.next=4,A["a"].deleteLike({tweetId:t});case 4:if(s=a.sent,i=s.data,"error"!==i.status){a.next=8;break}throw new Error(i.message);case 8:e.tweet.isLiked=!1,e.tweet.likeCount--,e.isProcessing=!1,a.next=18;break;case 13:a.prev=13,a.t0=a["catch"](0),console.log(a.t0),p["a"].fire({icon:"error",title:"無法取消按讚，請稍後再試"}),e.isProcessing=!1;case 18:case"end":return a.stop()}}),a,null,[[0,13]])})))()}}},m=w,f=(a("00c0"),a("2877")),g=Object(f["a"])(m,o,l,!1,null,"c8ac04de",null),v=g.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"postingcomments"},t._l(t.replies,(function(e){return a("div",{key:e.id},[a("div",{staticClass:"comment"},[a("router-link",{attrs:{to:{name:"user",params:{id:e.userId}}}},[a("img",{staticClass:"user-avatar",attrs:{src:e.avatar,alt:"avatar"}})]),a("div",{staticClass:"user-info"},[a("router-link",{attrs:{to:{name:"user",params:{id:e.userId}}}},[a("span",{staticClass:"user-name"},[t._v(" "+t._s(e.name)+" ")])]),a("span",{staticClass:"detail-info"},[t._v(" @"+t._s(e.account)+"・"+t._s(t._f("fromNow")(e.createdAt))+" ")])],1),a("p",{staticClass:"reply-to"},[t._v(" 回覆"),a("span",{staticClass:"tweet-account"},[t._v("@"+t._s(t.tweet.account))])]),a("p",{staticClass:"comment-content"},[t._v(t._s(e.comment))])],1)])})),0)},B=[],k=a("2708"),C={name:"PostingComments",mixins:[k["a"]],props:{initialTweet:{type:Object,required:!0},replies:{type:Array,required:!0}},data:function(){return{tweet:this.initialTweet}},watch:{initialTweet:function(t){this.tweet=Object(u["a"])(Object(u["a"])({},this.tweet),t)}}},Q=C,U=(a("91f6"),Object(f["a"])(Q,h,B,!1,null,"f6632362",null)),E=U.exports,R=a("c1df"),b=a.n(R);b.a.locale("zh-tw");var F={name:"ReplyList",components:{SideBar:n["a"],OtherUsers:c["a"],Posting:v,PostingComments:E},data:function(){return{tweet:{},replies:[]}},created:function(){this.fetchTweet(),this.fetchReplies()},methods:{fetchTweet:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s,i,r,n,c,o,l,u,d,w,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.$route.params.id,e.next=4,A["a"].getTweet({tweetId:a});case 4:s=e.sent,i=s.data,r=i.userId,n=i.avatar,c=i.name,o=i.account,l=i.description,u=i.createdAt,d=i.likeCount,w=i.replyCount,m=i.isLiked,t.tweet={userId:r,id:a,avatar:n,name:c,account:o,description:l,createdAt:u,likeCount:d,replyCount:w,isLiked:m},t.tweet.createdAtInCN=b()(t.tweet.createdAt).format("a h:mm ⋅ YYYY年M月Do"),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0),p["a"].fire({icon:"error",title:"無法取得推文，請稍後再試"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))()},fetchReplies:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.$route.params.id,e.next=4,A["a"].getTweetReplies({tweetId:a});case 4:s=e.sent,i=s.data,t.replies=i.map((function(t){return{id:t.id,userId:t.UserId,name:t.User.name,account:t.User.account,avatar:t.User.avatar,comment:t.comment,createdAt:t.createdAt}})),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0),p["a"].fire({icon:"error",title:"無法取得回覆資訊，請稍後再試"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},afterSubmit:function(){this.fetchTweet(),this.fetchReplies()}}},M=F,x=(a("5817"),Object(f["a"])(M,s,i,!1,null,"4936a555",null));e["default"]=x.exports},5817:function(t,e,a){"use strict";a("75d3")},"75d3":function(t,e,a){},"91f6":function(t,e,a){"use strict";a("c070")},c070:function(t,e,a){},cdcb:function(t,e,a){}}]);
//# sourceMappingURL=chunk-12659094.4d807dd7.js.map