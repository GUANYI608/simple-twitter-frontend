(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e69255ca"],{"121e":function(t,e,a){"use strict";a("dad5")},"2ca1":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("AdminSideBar"),a("div",{staticClass:"tweets-wrapper"},[a("h6",{staticClass:"page-title"},[t._v("推文清單")]),t._l(t.tweets,(function(e){return a("AdminTweets",{key:e.id,attrs:{"initial-tweet":e},on:{"after-delete-tweet":t.afterDeleteTweet}})}))],2)],1)},n=[],i=a("1da1"),r=(a("96cf"),a("d81d"),a("a4d3"),a("e01a"),a("754d")),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"admintweets"},[s("div",{staticClass:"tweet"},[s("img",{staticClass:"user-avatar",attrs:{src:t.tweet.avatar,alt:"avatar"}}),s("div",{staticClass:"user-info"},[s("span",{staticClass:"user-name"},[t._v(" "+t._s(t.tweet.name)+" ")]),s("span",{staticClass:"detail-info"},[t._v(" @"+t._s(t.tweet.account)+"・"+t._s(t._f("fromNow")(t.tweet.createdAt))+" ")])]),s("p",{staticClass:"tweet-content"},[t._v(" "+t._s(t.tweet.description)+" ")]),s("button",{staticClass:"delete-button",attrs:{disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteTweet(t.tweet.id)}}},[s("img",{staticClass:"delete-icon",attrs:{src:a("2d30"),alt:"delete"}})])])])},o=[],u=a("5530"),A=a("2708"),l=a("2fa3"),d=a("be6c"),w={name:"AdminTweets",mixins:[A["a"]],props:{initialTweet:{type:Object,required:!0}},data:function(){return{tweet:this.initialTweet,isProcessing:!1}},watch:{initialTweet:function(t){this.tweet=Object(u["a"])(Object(u["a"])({},this.tweet),t)}},methods:{deleteTweet:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isProcessing=!0,a.next=4,d["a"].tweets.delete({tweetId:t});case 4:if(s=a.sent,n=s.data,"success"===n.status){a.next=8;break}throw new Error(n.message);case 8:e.$emit("after-delete-tweet"),e.isProcessing=!1,a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](0),console.error(a.t0.message),l["a"].fire({icon:"error",title:"無法刪除推文，請稍後再試"});case 16:case"end":return a.stop()}}),a,null,[[0,12]])})))()}}},f=w,m=(a("121e"),a("2877")),v=Object(m["a"])(f,c,o,!1,null,"72ee283f",null),B=v.exports,g={name:"AdminHomePage",components:{AdminSideBar:r["a"],AdminTweets:B},data:function(){return{tweets:[]}},created:function(){this.fetchTweets()},methods:{fetchTweets:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].tweets.get();case 3:a=e.sent,s=a.data,t.tweets=s.map((function(t){return{id:t.id,description:t.description,createdAt:t.createdAt,name:t["User.name"],avatar:t["User.avatar"],account:t["User.account"],replyCount:t.replyCount,likeCount:t.likeCount,isLiked:t.isLiked}})),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error(e.t0.message),l["a"].fire({icon:"error",title:"無法取得推文資料，請稍後再試"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},afterDeleteTweet:function(){this.fetchTweets(),l["a"].fire({icon:"success",title:"已刪除該則推文"})}}},Q=g,p=(a("878c"),Object(m["a"])(Q,s,n,!1,null,"4118457d",null));e["default"]=p.exports},"2d30":function(t,e){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAAwADADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9U6KK+SfiL8RfiH+z98ZbnWNYubnXvBOr3DGG3LkxRxE5EcYPEcqDt0YDPckaQg5uyM5zUFdn1tRWP4R8XaV458P2mtaLdpe6fcruSReoPdWHZgeCD0o8XeLtK8DeH7vWtau0stPtl3PI3UnsqjuxPAA61Fnexd1a5sUV8k/Dr4i/EP8AaB+MttrGj3N1oPgnSJ1M1ushEUkQOTHIBxJK4/BQeMdT9bVc4ODsyITU1dBWN4u8I6V468P3ei61aJe6fcrteNuoPZlPZgeQR0rZrH8XeLtK8DeH7vWtau0stPtl3PI3UnsqjuxPAA61CvfQt2tqfHP/ABVf7GPxA/5baz4G1OT6LKv8knUfgwHp90/4qv8AbO+IH/LbRvA2mSfVYl/k87D8FB9PvH/FV/tnfED/AJbaN4G0yT6rEv8AJ52H4KD6feP+Kr/Yx+IH/LbWfA2pyfRZV/kk6j8GA9Pu+l93Pb+vmeb9/Jf+vkfYvhHwjpXgXw/aaLotollp9su1I16k92Y92J5JPWtmsfwj4u0rxz4ftNa0W7S90+5Xcki9Qe6sOzA8EHpWxXmu99T0la2gV8k/EX4d/EP9oH4y3Oj6xbXWg+CdInYQ3DRkRSRA4EkZPEkrj8FB5xyD9bUVcJuDuiJwU1ZmN4R8I6V4F8P2mi6LaJZafbLtSNepPdmPdieST1o8XeEdK8deH7vRdatEvdPuV2vG3UHsynswPII6Vs0VF3e5dlax8k/Dr4dfET9n74y22j6PbXOveCdXuFE1wEJhjiJwZJCOI5UHfowGO4x9bUUVc5ubuyIQUFZH/9k="},"754d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sidebar"},[s("img",{staticClass:"logo-img",attrs:{src:a("d5d7"),alt:"LOGO"}}),s("section",{staticClass:"nav-list"},[s("div",{staticClass:"nav-item"},[s("img",{staticClass:"nav-img",attrs:{src:a("a7c4"),alt:"index"}}),s("router-link",{staticClass:"nav-name",attrs:{to:"/admin/homepage"}},[t._v(" 推文清單 ")])],1),s("div",{staticClass:"nav-item"},[s("img",{staticClass:"nav-img",attrs:{src:a("18d5"),alt:"user"}}),s("router-link",{staticClass:"nav-name",attrs:{to:"/admin/users"}},[t._v(" 使用者列表 ")])],1),s("div",{staticClass:"nav-item signout",on:{click:t.logout}},[s("img",{staticClass:"nav-img",attrs:{src:a("46dc"),alt:"signout"}}),s("router-link",{staticClass:"nav-name",attrs:{to:"/admin/login"}},[t._v("登出")])],1)])])},n=[],i=a("2fa3"),r={methods:{logout:function(){this.$store.commit("revokeCurrentUser"),this.$router.push("/signin"),i["a"].fire({icon:"success",title:"已成功登出管理者帳號"})}}},c=r,o=(a("aab2"),a("2877")),u=Object(o["a"])(c,s,n,!1,null,"2857e6be",null);e["a"]=u.exports},8403:function(t,e,a){},"878c":function(t,e,a){"use strict";a("8403")},aab2:function(t,e,a){"use strict";a("d346")},be6c:function(t,e,a){"use strict";var s=a("2fa3"),n=function(){return localStorage.getItem("token")};e["a"]={tweets:{get:function(){return s["b"].get("/admin/tweets",{headers:{Authorization:"Bearer ".concat(n())}})},delete:function(t){var e=t.tweetId;return s["b"].delete("/admin/tweets/".concat(e),{headers:{Authorization:"Bearer ".concat(n())}})}},getUsers:function(){return s["b"].get("/admin/users",{headers:{Authorization:"Bearer ".concat(n())}})}}},d346:function(t,e,a){},dad5:function(t,e,a){}}]);
//# sourceMappingURL=chunk-e69255ca.66f9d8ae.js.map