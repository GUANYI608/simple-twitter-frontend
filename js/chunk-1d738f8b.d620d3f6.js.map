{"version":3,"sources":["webpack:///./src/views/UserSelf.vue?b6af","webpack:///src/views/UserSelf.vue","webpack:///./src/views/UserSelf.vue?e423","webpack:///./src/views/UserSelf.vue?9682","webpack:///./src/views/UserSelf.vue?5f9a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","afterPostTweet","attrs","user","afterProfileSubmit","_v","name","params","id","_l","tweet","key","afterFollowAction","staticRenderFns","components","SideBar","OtherUsers","UserProfile","Tweets","data","account","cover","avatar","introduction","tweetCount","followingCount","followerCOunt","tweets","computed","created","fetchUser","userId","fetchUserTweets","beforeRouteUpdate","next","methods","component"],"mappings":"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","file":"js/chunk-1d738f8b.d620d3f6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('SideBar',{on:{\"after-post-tweet\":_vm.afterPostTweet}}),_c('div',{staticClass:\"user-wrapper\"},[_c('UserProfile',{attrs:{\"initial-user\":_vm.user},on:{\"after-profile-submit\":_vm.afterProfileSubmit}}),_c('div',{staticClass:\"item-list\"},[_c('router-link',{staticClass:\"item-link\",attrs:{\"to\":\"#\"}},[_c('button',{staticClass:\"item item-current\"},[_vm._v(\"推文\")])]),_c('router-link',{staticClass:\"item-link\",attrs:{\"to\":{ name: 'user-reply', params: { id: _vm.user.id } }}},[_c('button',{staticClass:\"item\"},[_vm._v(\"推文與回覆\")])]),_c('router-link',{staticClass:\"item-link\",attrs:{\"to\":{ name: 'user-like', params: { id: _vm.user.id } }}},[_c('button',{staticClass:\"item\"},[_vm._v(\"喜歡的內容\")])])],1),_vm._l((_vm.tweets),function(tweet){return _c('Tweets',{key:tweet.id,attrs:{\"initial-tweet\":tweet}})})],2),_c('OtherUsers',{on:{\"after-follow-action\":_vm.afterFollowAction}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <!-- 使用 SideBar 元件 -->\n    <SideBar @after-post-tweet=\"afterPostTweet\" />\n\n    <div class=\"user-wrapper\">\n      <!-- 使用 UserProfile 元件 -->\n      <UserProfile\n        :initial-user=\"user\"\n        @after-profile-submit=\"afterProfileSubmit\"\n      />\n\n      <!-- 項目區塊 -->\n      <div class=\"item-list\">\n        <router-link to=\"#\" class=\"item-link\">\n          <button class=\"item item-current\">推文</button>\n        </router-link>\n        <router-link\n          :to=\"{ name: 'user-reply', params: { id: user.id } }\"\n          class=\"item-link\"\n        >\n          <button class=\"item\">推文與回覆</button>\n        </router-link>\n        <router-link\n          :to=\"{ name: 'user-like', params: { id: user.id } }\"\n          class=\"item-link\"\n        >\n          <button class=\"item\">喜歡的內容</button>\n        </router-link>\n      </div>\n\n      <!-- 使用 Tweets 元件 -->\n      <Tweets v-for=\"tweet in tweets\" :key=\"tweet.id\" :initial-tweet=\"tweet\" />\n    </div>\n\n    <!-- 使用 OtherUsers 元件 -->\n    <OtherUsers @after-follow-action=\"afterFollowAction\" />\n  </div>\n</template>\n\n<script>\nimport SideBar from \"../components/SideBar\";\nimport OtherUsers from \"../components/OtherUsers\";\nimport UserProfile from \"../components/UserProfile\";\nimport Tweets from \"../components/Tweets\";\nimport userAPI from \"../apis/user\";\nimport { Toast } from \"../utils/helpers\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"UserSelf\",\n  components: {\n    SideBar,\n    OtherUsers,\n    UserProfile,\n    Tweets,\n  },\n  data() {\n    return {\n      user: {\n        id: -1,\n        account: \"\",\n        name: \"\",\n        cover: \"\",\n        avatar: \"\",\n        introduction: \"\",\n        tweetCount: -1,\n        followingCount: -1,\n        followerCOunt: -1,\n      },\n      tweets: [],\n    };\n  },\n  computed: {\n    ...mapState([\"currentUser\"]),\n  },\n  created() {\n    const { id: userId } = this.$route.params;\n    this.fetchUser(userId);\n    this.fetchUserTweets(userId);\n  },\n  // 監聽路由事件\n  beforeRouteUpdate(to, from, next) {\n    const { id: userId } = to.params;\n    this.fetchUser(userId);\n    this.fetchUserTweets(userId);\n    next();\n  },\n  methods: {\n    // 取得單一使用者個人資料\n    async fetchUser(userId) {\n      try {\n        const { data } = await userAPI.getUser({ userId });\n\n        const {\n          id,\n          account,\n          name,\n          cover,\n          avatar,\n          introduction,\n          tweetCount,\n          followingCount,\n          followerCount,\n          isFollowing,\n        } = data;\n\n        this.user = {\n          id,\n          account,\n          name,\n          cover,\n          avatar,\n          introduction,\n          tweetCount,\n          followingCount,\n          followerCount,\n          isFollowing,\n        };\n      } catch (error) {\n        console.error(error);\n\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得使用者資料，請稍後再試\",\n        });\n      }\n    },\n    // 取得單一使用者所有推文\n    async fetchUserTweets(userId) {\n      try {\n        const { data } = await userAPI.getUserTweets({ userId });\n        this.tweets = data.map((tweet) => {\n          return {\n            id: tweet.tweetId,\n            userId: tweet.userId,\n            account: tweet.userAccount,\n            name: tweet.userName,\n            avatar: tweet.userAvatar,\n            description: tweet.description,\n            createdAt: tweet.createdAt,\n            replyCount: tweet.replyCount,\n            likeCount: tweet.likeCount,\n            isLiked: tweet.isLiked,\n          };\n        });\n      } catch (error) {\n        console.log(error);\n\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得推文，請稍後再試\",\n        });\n      }\n    },\n    // 於 SideBar 新增推文後，更新推文內容與數量於個人頁面\n    afterPostTweet() {\n      const { id: userId } = this.$route.params;\n      this.fetchUser(userId);\n      this.fetchUserTweets(userId);\n    },\n    afterFollowAction() {\n      const { id: userId } = this.$route.params;\n      this.fetchUser(userId);\n    },\n    afterProfileSubmit() {\n      const { id: userId } = this.$route.params;\n      this.fetchUser(userId);\n      this.fetchUserTweets(userId);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  display: grid;\n  grid-template-columns: 1fr 600px 1fr;\n}\n\n.user-wrapper {\n  height: auto;\n  outline: 1px solid #e6ecf0;\n}\n\n/* ----- 項目區塊 ----- */\n.item-list {\n  border-bottom: 1px solid #e6ecf0;\n}\n\n.item {\n  width: 130px;\n  height: 54px;\n\n  background: unset;\n  color: #657786;\n  font-weight: bold;\n  font-size: 15px;\n  border-radius: 0;\n}\n\n/* 當前頁面樣式：橘字加底線 */\n.item-current {\n  position: relative;\n}\n\n.item-current::after {\n  content: \"\";\n  background: #ff6600;\n  position: absolute;\n  top: 53px;\n  left: 0;\n  height: 2px;\n  width: 130px;\n  z-index: 1;\n}\n\n.item-current {\n  color: #ff6600;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSelf.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSelf.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserSelf.vue?vue&type=template&id=0dbc1f8c&scoped=true&\"\nimport script from \"./UserSelf.vue?vue&type=script&lang=js&\"\nexport * from \"./UserSelf.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserSelf.vue?vue&type=style&index=0&id=0dbc1f8c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0dbc1f8c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserSelf.vue?vue&type=style&index=0&id=0dbc1f8c&scoped=true&lang=css&\""],"sourceRoot":""}